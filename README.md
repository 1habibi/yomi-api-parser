# Парсер API Kodik

Асинхронный сервис на Python для получения и синхронизации данных об аниме из Kodik API в базу данных MySQL. Сервис периодически проверяет обновления и поддерживает базу данных в актуальном состоянии.

## Возможности

- Асинхронное получение данных
- Периодическая синхронизация с настраиваемым интервалом
- Обработка ошибок и логирование
- Эффективная пакетная обработка данных

## Требования

- Python 3.8 или новее
- MySQL 8.0 или новее
- API-токен Kodik

## Установка

1. Клон репозитория:
   ```bash
   git clone <URL>
   cd api-parser
   ```

2. Создать и активировать виртуальное окружение:
   ```bash
   python -m venv venv
   # Linux/macOS:
   source venv/bin/activate
   # Windows:
   .\venv\Scripts\activate
   ```

3. Установить зависимости:
   ```bash
   pip install -r requirements.txt
   ```

4. Создать файл `.env` на основе примера:
   ```bash
   cp .env.example .env
   ```


## Настройка базы данных

Скрипт автоматически создаст необходимые таблицы, если они не существуют. Убедитесь, что пользователь базы данных имеет достаточные права для создания таблиц и выполнения операций CRUD.

## Запуск парсера

```bash
python main.py
```

Сервис начнёт синхронизацию данных сразу после запуска и будет продолжать синхронизацию с заданным интервалом.

### Логи

Логи записываются в файл `log.txt` с ротацией (максимум 5 файлов по 5 МБ каждый).

### Последняя синхронизация

Время последней успешной синхронизации сохраняется в файле `last_sync.txt`.